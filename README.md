# NetMafia 3.0

**NetMafia 3.0** — это Docker-решение для развертывания серверной части игры в мафию. Проект включает в себя два основных сервиса: базу данных PostgreSQL и основное приложение (mafia_app), которое работает в контейнере.

# Функциональные требования

1. **Регистрация и авторизация пользователей**
   - Возможность создания учетной записи и входа в систему.

2. **Создание и управление игровыми сессиями**
   - Возможность создания новой игры с выбором настроек.
   - Возможность присоединения к существующей игре по id комнаты.

3. **Распределение ролей**
   - Автоматическое и случайное распределение ролей (например, Доктор, Провидец, Крикун, Альфа оборотень, Обычный оборотень, Житель, Шут) среди участников.

4. **Игровой процесс**
   - Реализация циклического процесса (ночная и дневная фазы).
   - Обработка действий игроков в ночное время (защита, проверка ролей, голосование оборотней).
   - Проведение дневных голосований с отображением результатов и принятие решений на основе них.
   - Автоматическое применение результатов действий (например, убийства, спасения).

5. **Коммуникация между игроками**
   - Встроенный чат для обмена сообщениями в дневной фазе.
   - Возможность отправки приватных сообщений между игроками определённых ролей (например, для оборотней).

6. **Отслеживание статуса и логирование**
   - Отображение текущего статуса игры: список игроков, роли (скрытые для неподходящих участников), результаты голосований.
   - Логирование действий игроков, ходов игры для дальнейшего анализа ситуаций.

7. **Добавление и удаление друзей**
   - Возможность добавить друга по логину и удалить друга.
---

# Нефункциональные требования

1. **Производительность**
   - Минимальная задержка при обмене данными между сервером и клиентами.
   - Поддержка одновременного подключения большого количества пользователей без существенного ухудшения отклика системы.

2. **Масштабируемость**
   - Возможность горизонтального и вертикального масштабирования компонентов приложения.
   - Применение контейнеризации (Docker, Docker Compose) для упрощения развертывания и масштабирования.

3. **Поддерживаемость и расширяемость**
   - Чёткая структура кода и документация для облегчения поддержки и добавления новых функций.
   - Наличие логирования для устранения проблем.

4. **Юзабилити (удобство использования)**
   - Интуитивно понятный пользовательский интерфейс с адаптивным дизайном для работы на различных устройствах.

5. **Тестируемость**
   - Наличие CI/CD процессов для автоматизации сборки и развертывания приложения.


## Особенности

- **Dockerized**: Полностью контейнеризованное приложение для лёгкого развертывания и масштабирования.
- **PostgreSQL**: Использование PostgreSQL для хранения данных.

## Требования

- Docker
- Docker Compose
## Установка и запуск

1. **Клонируйте репозиторий**

   Если вы работаете через GitHub Web UI, можно воспользоваться встроенным редактором или создать pull request для внесения изменений. Если же вы работаете локально, выполните:

   ```bash
   git clone https://github.com/Ggosh1/NetMafia3.0.git
   cd NetMafia3.0
   ```

**Настройте переменные окружения**

Создайте файл `.env` в корневой директории проекта и укажите в нём необходимые переменные:


```
#.env

POSTGRES_USER=your_postgres_user

POSTGRES_PASSWORD=your_secure_password

POSTGRES_DB=your_database_name

```

> Если вы используете GitHub Actions, секреты можно передавать напрямую через раздел `env` в workflow-файле.

**Запустите контейнеры**

Для сборки и запуска приложения выполните:
```bash
`docker compose up -d --build`
```


Эта команда соберёт образы и запустит сервисы в фоне. Приложение запускается на 8080 порту по умолчанию.



## Остановка приложения

Чтобы остановить и удалить контейнеры, выполните:


```bash
docker compose down
```



# Описание ролей

## Доктор (Doctor)
- **Описание**: Ты можешь выбрать игрока для защиты. Выбранный игрок не будет убит этой ночью.  
- **Команда**: Жители  
- **Аура**: Хороший  

---

## Провидец (Seer)
- **Описание**: Каждую ночь ты можешь выбрать игрока, чтобы узнать его роль.  
- **Команда**: Жители  

---

## Крикун (Loudmouth)
- **Описание**: Ты можешь выбрать игрока, роль которого будет раскрыта всем после твоей смерти.  
- **Команда**: Жители  

---

## Альфа оборотень (Alpha werewolf)
- **Описание**: Твой ночной голос считается за два. В течение дня ты можешь отправлять личные сообщения другим оборотням, которые могут видеть только они.  
- **Команда**: Оборотни  

---

## Обычный оборотень (Werewolf)
- **Описание**: Каждую ночь ты можешь голосовать с оборотнями за игрока, которого необходимо убить.  
- **Команда**: Оборотни  

---

## Житель (Villager)
- **Описание**: Ты обычный житель без каких-либо способностей.  
- **Команда**: Жители  

---

## Шут (Fool)
- **Описание**: Твоя цель — быть казнённым жителями. Если тебя казнят — ты победишь.  
- **Команда**: Одиночка  
